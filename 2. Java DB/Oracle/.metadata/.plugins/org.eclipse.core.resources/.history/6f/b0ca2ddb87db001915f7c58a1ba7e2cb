DROP TABLE movie;

CREATE table movie (
	id number PRIMARY KEY,
	title varchar2(20) NOT NULL,
	country varchar2(20) NOT NULL,
	release varchar2(20) default '0000.00.00',
	director varchar2(20));
	
INSERT INTO movie values (1, 'EXIT', 'KOR', '2019.08.01', '승현');
INSERT INTO movie values (2, 'Avengers', 'USA', '2011.05.11', '정민');
INSERT INTO movie values (3, 'Inception', 'USA', '2015.11.12', '은비');

SELECT * FROM movie;

DROP TABLE account;
CREATE TABLE account(
	id varchar2(10) PRIMARY KEY,
	name varchar2(20) NOT NULL,
	mymovie varchar2(20) default 0,
	power varchar2(2) default 0);
	
INSERT INTO account (id, name) values ('aaa', 'Mr.a');
INSERT INTO account (id, name) values ('bbb', 'Mr.b');
INSERT INTO account (id, name) values ('ccc', 'Ms.c');
INSERT INTO account (id, name, power) values ('admin', 'admin',1);

UPDATE ACCOUNT set mymovie = '2' WHERE id = 'bbb';
UPDATE ACCOUNT set mymovie = '2' WHERE id = 'ccc';

SELECT * FROM account;

SELECT DISTINCT(m.id), m.title, COUNT(a.mymovie)
FROM movie m, account a
WHERE m.id = a.mymovie;

SELECT m.id, m.title, COUNT(a.mymovie) as vote_count
FROM movie m, account a
WHERE m.id = a.mymovie
GROUP BY m.id, m.title;